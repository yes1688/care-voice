# Care Voice 正體中文、台語、英語優化計劃

## 計劃概述

**目標：** 提升 Care Voice 系統對正體中文、台語（閩南語）、英語的語音轉錄準確度

**優先順序：** 正體中文 > 台語 > 英語（維持現有水準）

**預期效果：** 正體中文轉錄準確度提升 20-30%

## 現況分析

### 目前使用的模型
- `ggml-tiny.bin` (74MB) - Turbo 模式
- `ggml-base.bin` (141MB) - Balanced 模式（主要使用）

### 語言支援限制
1. **正體中文**：Whisper 經常混合輸出簡體/繁體中文
2. **台語**：原生支援非常有限，需要專門微調
3. **英語**：目前表現良好，接近人類水準

## 解決方案

### 模型升級策略

**新增模型：**
- `ggml-medium.bin` (769MB) - 高準確度企業級品質
- `ggml-large-v3.bin` (1.55GB) - 業界領先準確度，支援100種語言包含粵語

**模型選擇理由：**
1. Large-v3 比 Large-v2 錯誤率降低 10-20%
2. Medium 模型在中文語言上表現優於 Base/Small
3. Large-v3 新增粵語支援，對台語可能有幫助

### 技術實施計劃

#### 第一階段：基礎設施準備

**1. 模型下載**
```bash
./scripts/enterprise-model-manager.sh download medium large-v3
```

**2. 驗證下載**
- 檢查模型完整性
- 確認可用磁盤空間（需額外 2.3GB）

#### 第二階段：代碼調整

**3. 擴展模型池 (`whisper_model_pool.rs`)**

新增品質等級：
```rust
pub enum TranscriptionQuality {
    Turbo,           // ggml-tiny.bin
    Balanced,        // ggml-base.bin  
    Medium,          // ggml-medium.bin (新增)
    HighAccuracy,    // ggml-large-v2.bin (保留)
    Premium,         // ggml-large-v3.bin (新增)
}
```

**4. 智能選擇邏輯優化 (`main.rs`)**

語言特定選擇：
- 正體中文音頻：優先使用 Medium 或 Premium
- 台語音頻：強制使用 Premium 模型
- 英語音頻：維持現有邏輯
- 短音頻（<5秒）：仍可使用 Turbo

**5. 語言參數設定**
- 正體中文：語言代碼設為 "zh-tw"
- 台語：語言代碼設為 "zh" 並調整溫度參數
- 英語：維持 "en"

#### 第三階段：WebCodecs 端點優化

**6. 中文音頻自動檢測**
- 實施音頻內容語言檢測
- 自動選擇最適合的模型
- 針對中文內容預設使用 Large-v3

#### 第四階段：基礎設施更新

**7. Docker 配置調整**
- 更新 Dockerfile 包含新模型
- 調整容器記憶體配置（增加 1-2GB）
- 更新模型下載腳本

**8. 環境變數配置**
- `WHISPER_CHINESE_MODEL=large-v3`
- `WHISPER_DEFAULT_LANGUAGE=zh-tw`
- `WHISPER_TEMPERATURE=0.0`（提高中文準確度）

## 資源需求

### 硬體需求
- **磁盤空間**：額外 2.3GB
- **GPU 記憶體**：增加 1-2GB
- **處理時間**：中文內容增加 10-20%，但準確度大幅提升

### 軟體相依性
- 現有 whisper-rs 0.14.3 支援所有新模型
- CUDA 加速仍然有效

## 測試計劃

### 測試案例
1. **正體中文語音測試**
   - 新聞播報
   - 日常對話
   - 專業術語

2. **台語語音測試**
   - 基本對話
   - 混合中台語

3. **英語回歸測試**
   - 確保英語功能不受影響

### 成功指標
- 正體中文 WER (Word Error Rate) 改善 20%+
- 台語基本識別能力
- 英語性能維持 95%+ 原有水準

## 風險評估

### 潛在風險
1. **記憶體不足**：較大模型可能導致 OOM
2. **處理延遲**：轉錄時間可能增加
3. **台語效果**：可能仍然有限

### 緩解措施
1. 智能模型選擇：根據音頻長度動態選擇
2. 記憶體監控：實施 GPU 記憶體管理
3. 回退機制：失敗時自動降級到較小模型

## 實施時程

- **第1天**：模型下載與驗證
- **第2天**：代碼調整與測試
- **第3天**：Docker 配置與部署測試
- **第4天**：完整功能測試與調優

## 後續擴展

### 進階優化
1. **台語專用微調**：整合 ChineseTaiwaneseWhisper 專案
2. **多語言混合處理**：支援中英混合語音
3. **即時語言檢測**：自動識別語言並切換模型

### 企業級功能
1. **A/B 測試框架**：比較不同模型效果
2. **用戶語言偏好**：記憶用戶語言設定
3. **品質監控儀表板**：即時監控轉錄品質

## 結論

此計劃透過升級到更強大的 Whisper 模型，並針對正體中文和台語進行專門優化，預期可以顯著提升 Care Voice 系統的多語言語音轉錄能力，特別是在台灣本地化場景中的表現。

---

**建立日期：** 2025-07-31  
**負責人：** Care Voice 開發團隊  
**版本：** v1.0  
**狀態：** 規劃中 → 實施中